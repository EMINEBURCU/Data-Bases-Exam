<!DOCTYPE html>
<html lang="en">
<head>
    <title>Summary of Results</title>
    <script>
        function logPairs() {
            {% for pair in pairs %}
                var pairDict = {
                    student1: "{{ pair.student1 }}",
                    student2: "{{ pair.student2 }}",
                    course: "{{ pair.course }}"
                };
                console.log(JSON.stringify(pairDict));
            {% endfor %}
        }
        window.onload = logPairs;
    </script>
    
</head>
<body>
    <h1>Summary of Results</h1>

    <h2>Mutually Preferred Pairs</h2>
    <table>
        <thead>
            <tr>
                <th>Student 1</th>
                <th>Student 2</th>
                <th>Student 3</th>
                <th>Course</th>
            </tr>
        </thead>
        <tbody>
            {% for pair in pairs %}
            <tr>
                <td>{{ pair.student1 }}</td>
                <td>{{ pair.student2 }}</td>
                <td>{{ pair.student3 }}</td>
                <td>{{ pair.course }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>Top Students by Class</h2>
    {% for class_name, students in popular_students.items() %}
    <h3>Class {{ class_name }}</h3>
    <ol>
        {% for student in students %}
        <li>{{ student.name }} (Popularity: {{ student.popularity }})</li>
        {% endfor %}
    </ol>
    {% endfor %}

    <h2>Popular Courses</h2>
    <ol>
        {% for course in popular_courses %}
        <li>{{ course.name }} (Popularity: {{ course.popularity }})</li>
        {% endfor %}
    </ol>
</body>
</html>